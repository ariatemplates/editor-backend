A node/graph library tailored for ASTs.

The implementation of a node/graph, which is the data model for a formal language.





# File system layout

- [`readme.md`](./readme.md): the main documentation file
- [`index.js`](./index.js): module entry point

Classes:

- [`node`](./node): the actual node implementation
- [`location`](./location): a location for a node
- [`position`](./position): a position in a text for a node
- [`node-type`](./node-type): a type for a node





# Model

__Warning:__

- position information is a common pitfall: 0-based index, 1-based index, exclusive, inclusive

```livescript
{
	type:
		language // language
		element // node type for that languages
	location:
		start: // inclusive, start position of the node: equivalent to where would be the caret in a source code editor
			line // 1-based line index
			column // 1-based column index
			index // 0-based total index
		end: // exclusive, end position of the node: equivalent to the position right on the right of the character
			line // 1-based line index
			column // 1-based column index
			index // 0-based total index
	source // the source code corresponding to this node

	properties: {} // A simple object for properties which are not directly linked nodes
	children: [] // Allows notion of order among children
	childrenIndex: {} // Adds id mapping to children
}
```




# Backlog

## Generalize directional links between nodes

__For now every operations made on a graph consider children. Be able to consider the parent, or even siblings.__

For instance, this would give the possibility to do `addParent` (`setParent` in our case due to the nature of the graph).

Also, be able to traverse from children to parents. Maybe this one is weird.

## Lazy evaluations

__Use standard properties definitions (like proxies).__

This way there can be lazy updates of the graph.

When the user of the node requests a property value, the node can check if there are things to re-compute (basically its subgraph changed), does it, caches the value, and anyway returns this value.

The little overhead of using the getter anytime is worth it I guess.
