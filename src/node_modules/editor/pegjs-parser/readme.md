Common resources used by parsers generated with PEG.js





# File system layout

- [`readme.md`](./readme.md): the main documentation file
- [`readme.md`](./readme.md): the moduel entry point

Modules: 

- [`parser`](./parser): `Parser`.
- [`initializer`](./initializer): a module gathering everything that should be exported for initialization blocks of grammar files.
- [`helpers`](./helpers): contains utility functions to be used inside grammar files, where the code is really repetitive, follows some pattern, and is somewhat constrained.
- [`test`](./test): a module able to _visually_ test parsers generated by PEG.js.





# FIXME

- There are problems building a parser programatically, especially because of the use of require inside the grammar, in the context of the `eval` it doesn't work.





# Backlog

## Node instantiation hooks

__There could be a feature of hooking the node instantiation to simplify the grammar.__

After a node is instantiated, a hook could be called based on a predicate.

Just register a hook associated to a predicate. When a node is instantiated, it runs through all predicates, and corresponding hooks will be applied if they pass.

This way it could be easier to flag a node with some properties for instance, based on node attributes.

> Example?

Use a predicate testing if the element type of the node is among the list of elements corresponding to blocks. If so, add a flag to the node telling it's a block. (we don't mind for the sake of the example if the practice is good or not).




# Development paths

## Initializer

You can gather anything you want to expose to PEG.js grammar in the [_initializer_](./initializer.js) module file.

This file should not contain any logic, it should just import modules and re-export them, gathering the whole, and possibly renaming, aliasing, whatever.

It's just a bridge between libraries and PEG.js grammars.

## Helpers

Add in the [_helper_](./helper.js) module file anything that would simplify the code in PEG.js grammars.

Inside it, you will find code that will reduce boilerplate, workaround some limitations, etc.

## Parser

You can work on the [_parser_](./parser.js) module file. Please refer to the section about the `Parser` model.

Check if the post-process in used already. If not, remove it from here. If yes, try to find an alternative. Otherwise, stick with it.






# References

- PEG.js [GitHub repository](https://github.com/dmajda/pegjs): what's on the GH repository is more up-to-date that what is on the [official website](http://pegjs.majda.cz/). We use the GH version of the library.
